<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="shoppingList.Views.StoreListView"
             Title="Lista sklepowa">

    <VerticalStackLayout Margin="10">

        <VerticalStackLayout Margin="0,0,0,15">
            <Label Text="Wybierz sklep:" FontSize="16" FontAttributes="Bold" Margin="0,0,0,5"/>
            <Picker ItemsSource="{Binding StoreList}" 
                    SelectedIndex="{Binding SelectedStoreIndex}"
                    FontSize="16"/>
        </VerticalStackLayout>

        <ScrollView >
            <CollectionView ItemsSource="{Binding FilteredItems}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <SwipeView>
                            <Grid Padding="10,5" 
                                  BackgroundColor="{Binding bgColor}"
                                  Margin="0,2">

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Text="ðŸš«" Command="{Binding DeleteItemButton}" Background="Transparent" ></Button>

                                <CheckBox Grid.Column="1" 
                                         IsChecked="{Binding bought}"
                                         VerticalOptions="Center"
                                         Margin="0,0,10,0"/>

                                <VerticalStackLayout Grid.Column="2" 
                                                    VerticalOptions="Center">
                                    <Label Text="{Binding name}" 
                                           TextColor="{Binding textColor}"
                                           TextDecorations="{Binding textDecor}"
                                           FontSize="16"
                                           FontAttributes="Bold"/>
                                    <Label Text="{Binding optionalText}" 
                                           TextColor="#FFA500"
                                           FontSize="12"
                                           IsVisible="{Binding Optional}"/>
                                </VerticalStackLayout>

                                <Label Grid.Column="3" 
                                       VerticalOptions="Center"
                                       TextColor="{Binding textColor}"
                                       TextDecorations="{Binding textDecor}"
                                       FontSize="14"
                                       Margin="10,0,0,0">
                                    <Label.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="amount"/>
                                            <Binding Path="unit"/>
                                        </MultiBinding>
                                    </Label.Text>
                                </Label>
                            </Grid>
                        </SwipeView>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

                <CollectionView.EmptyView>
                    <VerticalStackLayout HorizontalOptions="Center" 
                                        VerticalOptions="Center"
                                        Margin="0,50,0,0">
                        <Label Text="Brak produktÃ³w w tym sklepie" 
                               FontSize="16"
                               TextColor="Gray"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
            </CollectionView>
        </ScrollView>
    </VerticalStackLayout>
</ContentPage>